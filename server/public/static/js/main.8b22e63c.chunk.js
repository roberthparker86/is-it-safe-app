(this["webpackJsonpis-it-safe-app"]=this["webpackJsonpis-it-safe-app"]||[]).push([[0],{83:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(24),c=n.n(r),s=n(7),o=n(21),i=n(42),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{isAuthenticated:t.isAuthenticated};case"LOGOUT":return{};default:return e}},l=n(3),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(l.a)({},t.user);case"LOGOUT":return{};case"UPDATE_FOOD":return Object(l.a)(Object(l.a)({},e),{},{freezer:t.freezer,refrigerator:t.refrigerator});default:return e}},j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,b=function(){return Object(o.d)(Object(o.b)({auth:u,user:d}),j(Object(o.a)(i.a)))},m=n(4),p=n(13),f=n(16),O=n(15),h=n(9),x=n.n(h),g=n(14),v=n.n(g),N=n(1),_=function(e){var t=e.id,n=e.type,a=e.onClick,r=e.className,c=e.href,s=e.children;return Object(N.jsx)("button",{id:t,type:n||"",onClick:a||"",className:r,href:c||"",children:s})},y=function(e){return Object(N.jsx)("h1",{className:e.className||"",children:e.children})},w=function(e){var t=Object(s.c)(),n=Object(m.g)(),r=Object(s.d)((function(e){return e.auth})),c=Object(a.useMemo)((function(){return r.isAuthenticated}),[r]),o=function(){var e=Object(p.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8080/api/signout",e.next=3,v.a.get("http://localhost:8080/api/signout");case 3:a=e.sent;try{200===a.status&&(t({type:"LOGOUT"}),n.replace("/"),console.log(a))}catch(r){console.log(r)}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)("header",{children:Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)(y,{className:"logo",children:"Is It Safe?"}),c&&Object(N.jsxs)(_,{className:"signout__btn",onClick:o,children:[Object(N.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(N.jsx)("h4",{children:"Signout"})]})]})})},D=function(e){var t=e.className,n=e.method,a=e.action,r=e.children;return Object(N.jsx)("form",{className:t||"",method:n||"",action:a||"",children:r})},C=function(e){var t=e.className,n=e.labelText,a=e.id,r=e.inputValue,c=e.placeholder,s=e.onChange;return Object(N.jsxs)("div",{className:t||"",children:[Object(N.jsx)("label",{htmlFor:a||"",children:n}),Object(N.jsx)("input",{type:e.type?e.type:"text",id:a||"",name:a||"",value:r||"",placeholder:c||"",onChange:s})]})},T=function(e){var t=Object(m.g)(),n=Object(a.useState)({firstName:"",email:"",password:""}),r=Object(O.a)(n,2),c=r[0],s=r[1],o=function(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(f.a)({},n,a))}))},i=function(){var e=Object(p.a)(x.a.mark((function e(n,a,r){var c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={firstName:n,email:a.toLowerCase(),password:r},e.prev=1,e.next=4,v.a.post("".concat("http://localhost:8080/api/","signup"),c);case 4:(s=e.sent)&&(console.log(s),t.push("/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(w,{}),Object(N.jsxs)("div",{className:"container container--login",children:[Object(N.jsx)("h4",{children:"Please enter a valid email address and password to create a user account."}),Object(N.jsxs)(D,{className:"login-form",children:[Object(N.jsx)(C,{className:"login-form__input",id:"firstName",inputValue:c.firstName,onChange:o}),Object(N.jsx)(C,{className:"login-form__input",id:"email",inputValue:c.email,onChange:o}),Object(N.jsx)(C,{className:"login-form__input",id:"password",inputValue:c.password,onChange:o}),Object(N.jsx)(_,{className:"login-form__btn",onClick:function(e){i(c.firstName,c.email,c.password),e.preventDefault()},children:"Sign Up"})]})]})]})},k=n(12),A=n(17),z=n.n(A),E=function(e,t){return console.log({start:e,expire:t,toReturn:z()(t).diff(e,"hours")}),z()(t).diff(e,"hour")},F=function(e,t){var n=E(e.startTime,e.expireTime),a=E(t.startTime,t.expireTime);return console.log({aTimeRemain:n,bTimeRemain:a}),n-a>=0?1:-1},S=function(e){var t=Object(s.c)(),n=Object(m.g)(),r=Object(s.d)((function(e){return e.auth})),c=Object(a.useMemo)((function(){return r.isAuthenticated}),[r]),o=Object(a.useMemo)((function(){return n.location.pathname}),[n]);Object(a.useEffect)((function(){"/"!==o&&!c&&n.replace("/")}),[o,c,n]);var i=Object(a.useState)({email:"",password:""}),u=Object(O.a)(i,2),d=u[0],j=u[1],b=function(e){var t=e.target,n=t.name,a=t.value;j((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(f.a)({},n,a))}))},h=function(){var e=Object(p.a)(x.a.mark((function e(a,r){var c,s,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={email:a,password:r},e.prev=1,e.next=4,v.a.post("".concat("http://localhost:8080/api/","signin"),c);case 4:s=e.sent,(o=s.data)&&(console.log(o),o.user.freezer.sort((function(e,t){return F(e,t)})),o.user.refrigerator.sort((function(e,t){return F(e,t)})),t({type:"LOGIN",isAuthenticated:!0,user:o.user}),n.push("/dashboard")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(w,{}),Object(N.jsxs)("div",{className:"container container--login",children:[Object(N.jsxs)(D,{className:"login-form",children:[Object(N.jsx)(C,{className:"login-form__input",id:"email",inputValue:d.email,onChange:b}),Object(N.jsx)(C,{className:"login-form__input",id:"password",type:"password",inputValue:d.password,onChange:b}),Object(N.jsx)(_,{className:"login-form__btn",onClick:function(e){h(d.email,d.password),e.preventDefault()},children:"Login"})]}),Object(N.jsxs)("h4",{children:["or ",Object(N.jsx)(k.a,{to:"/signup",children:"Sign Up"})]})]})]})},I=function(e){var t=e.remainingTime,n=e.user,a=e.id,r=e.status,c=e.name,s=e.compartment,o=e.handleDelete;return Object(N.jsx)("div",{className:"grid__column",id:a,children:Object(N.jsxs)("div",{className:"grid__card "+r,children:[Object(N.jsx)("h2",{children:t}),Object(N.jsx)("h3",{className:"text-green",children:r}),Object(N.jsx)("h4",{children:c}),Object(N.jsx)("button",{className:"grid__card--close-btn",onClick:function(){return o({userId:n.id,foodId:a,compartment:s})},children:Object(N.jsx)("i",{className:"fas fa-times fa-2x"})})]})},a)},L=function(e){return Object(N.jsxs)("section",{className:"compartment-toggle",children:[Object(N.jsx)("button",{id:"refrigerator",className:"refrigerator"===e.displayedCompartment?"btn btn-primary active":"btn btn-primary",onClick:function(t){t.preventDefault(),e.setDisplayedCompartment(t.target.id)},children:"Refrigerator"}),Object(N.jsx)("button",{id:"freezer",className:"freezer"===e.displayedCompartment?"btn btn-primary active":"btn btn-primary",onClick:function(t){t.preventDefault(),e.setDisplayedCompartment(t.target.id)},children:"Freezer"})]})},V=function(e){var t=Object(m.g)(),n=Object(s.c)(),r=Object(s.d)((function(e){return e.auth})),c=Object(s.d)((function(e){return e.user})),o=Object(a.useMemo)((function(){return r.isAuthenticated}),[r]),i=Object(a.useMemo)((function(){return t.location.pathname}),[t]),u=Object(a.useMemo)((function(){return c}),[c]),d=Object(a.useState)(!1),j=Object(O.a)(d,2),b=j[0],h=j[1],g={foodName:"",startDate:z()().format("YYYY-MM-DD"),expiryDate:"",compartment:""},_=Object(a.useState)(g),y=Object(O.a)(_,2),w=y[0],T=y[1],k=Object(a.useState)(!1),A=Object(O.a)(k,2),S=A[0],V=A[1],M=Object(a.useState)("refrigerator"),U=Object(O.a)(M,2),G=U[0],R=U[1],P=w.foodName,Y=w.startDate,J=w.expiryDate,X=w.compartment,B=function(e){var t=e.target,n=t.name,a=t.value;T((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(f.a)({},n,a))}))},q=function(){var e=Object(p.a)(x.a.mark((function e(t){var a,r,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("http://localhost:8080/api/delete-food",t);case 2:a=e.sent;try{200===a.status&&(console.log(a.data.data),r=a.data.data,c=r.freezer,s=r.refrigerator,c.sort((function(e,t){return F(e,t)})),s.sort((function(e,t){return F(e,t)})),n({type:"UPDATE_FOOD",freezer:c,refrigerator:s}))}catch(o){console.log({err:o})}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=Object(a.useCallback)(function(){var e=Object(p.a)(x.a.mark((function e(t){var a,r,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("http://localhost:8080/api/add-food",t);case 2:a=e.sent;try{console.log({response:a}),r=a.data.data,c=r.freezer,s=r.refrigerator,c.sort((function(e,t){return F(e,t)})),s.sort((function(e,t){return F(e,t)})),n({type:"UPDATE_FOOD",freezer:c,refrigerator:s}),V(!1),h(!1),T(g)}catch(o){console.log({err:o}),V(!1),h(!1),T(g)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[V,n]);return Object(a.useEffect)((function(){"/"!==i&&!o&&t.replace("/")}),[i,o,t]),Object(a.useEffect)((function(){if(S){var e={id:u.id,name:P,startTime:z()(Y).format(),expireTime:z()(J).format(),compartment:X.toLowerCase()};H(e)}}),[S,w,X,u.id,Y,P,J,H]),Object(N.jsxs)("div",{className:"container container--main-content",children:[Object(N.jsx)("button",{id:"add",className:"btn btn-primary",onClick:function(){return h(!b)},children:"+ Add Food"}),Object(N.jsxs)(D,{className:b?"add-food__form show":"add-food__form",children:[Object(N.jsx)(C,{className:"add-food__input-container",labelText:"Food Name",id:"foodName",name:"foodName",inputValue:P,placeholder:"Food name",onChange:B}),Object(N.jsx)(C,{type:"date",className:"add-food__input-container",labelText:"Date Cooked/Opened",id:"startDate",name:"startDate",inputValue:Y,placeholder:"Date food was opened or cooked",onChange:B}),Object(N.jsx)(C,{type:"date",className:"add-food__input-container",labelText:"Expiry Date",id:"expiryDate",name:"expiryDate",inputValue:J,placeholder:"Days until food expires",onChange:B}),Object(N.jsx)("label",{htmlFor:"compartment",children:"Refrigerator or freezer?"}),Object(N.jsxs)("select",{name:"compartment",className:"add-food__select",id:"compartment",children:[Object(N.jsx)("option",{value:"refrigerator",children:"Refrigerator"}),Object(N.jsx)("option",{value:"freezer",children:"Freezer"})]}),Object(N.jsx)("button",{type:"submit",className:"btn btn-secondary",onClick:function(e){e.preventDefault(),V(!0)},children:"Add"})]}),Object(N.jsx)(L,{displayedCompartment:G,setDisplayedCompartment:R}),Object(N.jsx)("section",{className:"grid",children:u[G]&&u[G].map((function(e){var t,n=E(e.startTime,e.expireTime),a=(t=n)<=0?"bad":t<48?"warning":"good";return Object(N.jsx)(I,{id:e._id,status:a,remainingTime:n,name:e.name,handleDelete:q,user:u,compartment:G},e._id)}))})]})},M=n(27),U=["isAuthenticated","component"],G=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,n=e.component,a=Object(M.a)(e,U);return Object(N.jsx)(m.b,Object(l.a)(Object(l.a)({},a),{},{component:function(e){return t?Object(N.jsx)(m.a,{to:"/dashboard"}):Object(N.jsx)(n,Object(l.a)({},e))}}))})),R=["isAuthenticated","component"],P=Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){var t=e.isAuthenticated,n=e.component,a=Object(M.a)(e,R);return Object(N.jsx)(m.b,Object(l.a)(Object(l.a)({},a),{},{component:function(e){return t?Object(N.jsxs)("div",{children:[Object(N.jsx)(w,{}),Object(N.jsx)(n,Object(l.a)({},e))]}):Object(N.jsx)(m.a,{to:"/"})}}))})),Y=function(){return Object(N.jsxs)("div",{children:["404! Not found. - ",Object(N.jsx)(k.a,{to:"/",children:"Go home"})]})},J=n(44),X=function(e){return Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Yo you in the secret sauce meow foo!"}),Object(N.jsx)("p",{children:"(In other woulds auth is working)"})]})},B=Object(J.a)(),q=function(){return Object(N.jsx)(m.c,{history:B,children:Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(m.d,{children:[Object(N.jsx)(G,{path:"/",component:S,exact:!0}),Object(N.jsx)(G,{path:"/signup",component:T,exact:!0}),Object(N.jsx)(P,{path:"/dashboard",component:V,exact:!0}),Object(N.jsx)(P,{path:"/secret",component:X,exact:!0}),Object(N.jsx)(m.b,{component:Y})]})})})},H=b(),K=Object(N.jsx)(s.a,{store:H,children:Object(N.jsx)(q,{})});c.a.render(K,document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.8b22e63c.chunk.js.map